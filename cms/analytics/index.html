<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard - Kathrin Coaching</title>

    <!-- Styles -->
    <link rel="stylesheet" href="../css/editor.css">
    <link rel="stylesheet" href="../../css/scheduling/calendar.css">
    <link rel="stylesheet" href="dashboard.css">

    <!-- Modern UI Styles (Glassmorphism) -->
    <link rel="stylesheet" href="../../css/editor-modern/index.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"
            integrity="sha384-jb8JQMbMoBUzgWatfe6COACi2ljcDdZQ2OxczGA3bGNeWe+6DChMTBJemed7ZnvJ"
            crossorigin="anonymous"></script>
</head>
<body class="modern">
    <!-- Toolbar (gleiche Struktur wie CMS/Blog Editor) -->
    <div class="toolbar modern">
        <div class="toolbar-left">
            <div class="toolbar-logo">Editor</div>
            <div class="toolbar-mode-switch">
                <a href="../" class="mode-btn">Seiten</a>
                <a href="../../blog-editor-modular.html" class="mode-btn">Blog</a>
                <a href="./" class="mode-btn active">Analytics</a>
                <a href="../docs.html" class="mode-btn" title="Dokumentation">üìö Docs</a>
            </div>
        </div>
        <div class="toolbar-center">
            <h1 style="font-size: 1rem; margin: 0; color: rgba(255,255,255,0.9);">üìä Analytics Dashboard</h1>
        </div>
        <div class="toolbar-right">
            <select id="dateRange" onchange="Dashboard.loadData()" class="toolbar-select">
                <option value="7">Letzte 7 Tage</option>
                <option value="30" selected>Letzte 30 Tage</option>
                <option value="90">Letzte 90 Tage</option>
            </select>
            <button class="btn btn-ghost" onclick="Dashboard.refresh()">‚Üª Aktualisieren</button>
        </div>
    </div>

    <!-- Main Dashboard -->
    <main class="dashboard-main">
        <!-- KPI Cards -->
        <section class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-icon">üë•</div>
                <div class="kpi-content">
                    <span class="kpi-value" id="kpiVisitors">-</span>
                    <span class="kpi-label">Besucher</span>
                    <span class="kpi-change positive" id="kpiVisitorsChange">-</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon">üìÑ</div>
                <div class="kpi-content">
                    <span class="kpi-value" id="kpiPageviews">-</span>
                    <span class="kpi-label">Seitenaufrufe</span>
                    <span class="kpi-change positive" id="kpiPageviewsChange">-</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon">‚è±Ô∏è</div>
                <div class="kpi-content">
                    <span class="kpi-value" id="kpiReadTime">-</span>
                    <span class="kpi-label">√ò Lesezeit</span>
                    <span class="kpi-change" id="kpiReadTimeChange">-</span>
                </div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon">üìú</div>
                <div class="kpi-content">
                    <span class="kpi-value" id="kpiScrollDepth">-</span>
                    <span class="kpi-label">Scroll >75%</span>
                    <span class="kpi-change" id="kpiScrollDepthChange">-</span>
                </div>
            </div>
        </section>

        <!-- Charts Row -->
        <section class="charts-row">
            <div class="chart-card large">
                <h3>üìà Traffic-Verlauf</h3>
                <canvas id="trafficChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>üî• Top Blog-Artikel</h3>
                <div class="top-articles-list" id="topArticles">
                    <div class="loading-placeholder">Lade Daten...</div>
                </div>
            </div>
        </section>

        <!-- Lead Funnel -->
        <section class="funnel-section">
            <h3>üéØ Lead-Funnel</h3>
            <div class="funnel-visualization">
                <div class="funnel-step">
                    <div class="funnel-bar" style="width: 100%">
                        <span class="funnel-label">Blog gelesen</span>
                        <span class="funnel-value" id="funnelBlog">-</span>
                    </div>
                </div>
                <div class="funnel-arrow">‚Üí</div>
                <div class="funnel-step">
                    <div class="funnel-bar" style="width: 60%">
                        <span class="funnel-label">CTA geklickt</span>
                        <span class="funnel-value" id="funnelCta">-</span>
                    </div>
                </div>
                <div class="funnel-arrow">‚Üí</div>
                <div class="funnel-step">
                    <div class="funnel-bar" style="width: 30%">
                        <span class="funnel-label">Quiz gestartet</span>
                        <span class="funnel-value" id="funnelQuiz">-</span>
                    </div>
                </div>
                <div class="funnel-arrow">‚Üí</div>
                <div class="funnel-step">
                    <div class="funnel-bar" style="width: 15%">
                        <span class="funnel-label">Kontakt</span>
                        <span class="funnel-value" id="funnelContact">-</span>
                    </div>
                </div>
            </div>
            <div class="funnel-conversion">
                Conversion-Rate: <strong id="conversionRate">-</strong> (Blog ‚Üí Kontakt)
            </div>
        </section>

        <!-- Bottom Row -->
        <section class="charts-row">
            <div class="chart-card">
                <h3>üìç Traffic-Quellen</h3>
                <div class="sources-list" id="trafficSources">
                    <div class="loading-placeholder">Lade Daten...</div>
                </div>
            </div>
            <div class="chart-card">
                <h3>üì± Ger√§te</h3>
                <canvas id="devicesChart"></canvas>
            </div>
        </section>

        <!-- Blog Analytics -->
        <section class="blog-analytics">
            <h3>üìù Blog-Performance</h3>
            <table class="analytics-table">
                <thead>
                    <tr>
                        <th>Artikel</th>
                        <th>Aufrufe</th>
                        <th>√ò Lesezeit</th>
                        <th>Scroll >75%</th>
                        <th>CTA Klicks</th>
                    </tr>
                </thead>
                <tbody id="blogAnalyticsTable">
                    <tr>
                        <td colspan="5" class="loading-placeholder">Lade Daten...</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <!-- Scripts -->
    <script src="dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Dashboard.init();
        });
    </script>
</body>
</html>
